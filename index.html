<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>PJ Official – Under Maintenance</title>
</head>

<body
  style="
    margin:0;
    min-height:100vh;
    background:#000000;
    color:#ffffff;
    font-family:Arial, Helvetica, sans-serif;
    display:flex;
    align-items:center;
    justify-content:center;
    text-align:center;
  "
>

  <div style="max-width:420px; width:100%; padding:24px;">

    <!-- GEAR ANIMATION (MIXED CONCEPT) -->
    <div style="position:relative; height:130px; margin-bottom:30px;">
      <div class="gear big-gear">⚙️</div>
      <div class="gear mid-gear">⚙️</div>
      <div class="gear small-gear">⚙️</div>
    </div>

    <h2 style="margin-bottom:10px;">
      PJ official website is under update
    </h2>

    <p style="color:#cccccc; font-size:14px; line-height:1.6;">
      Enter your email to get notified once the website is live.
    </p>

    <input
      id="email"
      type="email"
      placeholder="Enter your email"
      style="
        width:100%;
        padding:12px;
        margin-top:20px;
        border-radius:6px;
        border:none;
        outline:none;
        font-size:14px;
      "
    />

    <button
      onclick="saveEmail()"
      style="
        margin-top:20px;
        padding:12px;
        width:100%;
        border:none;
        border-radius:30px;
        background:#ff7a00;
        color:#000000;
        font-weight:bold;
        font-size:14px;
        cursor:pointer;
      "
    >
      Continue
    </button>

    <p style="font-size:12px; color:#888888; margin-top:16px;">
      We will notify you when the update is completed.
    </p>

  </div>

<script type="module">
import { db } from "./firebase.js";
import {
  collection,
  addDoc,
  query,
  where,
  getDocs
} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

async function saveEmail() {
  const email = document.getElementById("email").value.trim();
  if (!email) {
    alert("Please enter a valid email");
    return;
  }

  const q = query(
    collection(db, "notifyEmails"),
    where("email", "==", email)
  );
  const snap = await getDocs(q);

  if (!snap.empty) {
    alert("Email already registered");
    return;
  }

  await addDoc(collection(db, "notifyEmails"), {
    email: email,
    notified: false,
    createdAt: Date.now()
  });

  alert("Email saved successfully!");
  document.getElementById("email").value = "";
}

window.saveEmail = saveEmail;
</script>

<style>
.gear {
  position:absolute;
  color:#ff7a00;
  display:flex;
  align-items:center;
  justify-content:center;
}

.big-gear {
  font-size:90px;
  left:50%;
  top:50%;
  transform:translate(-50%, -50%);
  animation:spin 4s linear infinite;
}

.mid-gear {
  font-size:60px;
  left:65%;
  top:35%;
  animation:spin-reverse 2.5s linear infinite;
}

.small-gear {
  font-size:40px;
  left:38%;
  top:30%;
  animation:spin 2s linear infinite;
}

@keyframes spin {
  from { transform:translate(-50%, -50%) rotate(0deg); }
  to   { transform:translate(-50%, -50%) rotate(360deg); }
}

@keyframes spin-reverse {
  from { transform:rotate(360deg); }
  to   { transform:rotate(0deg); }
}
</style>

</body>
</html>
